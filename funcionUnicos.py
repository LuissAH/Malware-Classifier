import os

# Definir el nombre de la carpeta de salida
output_dir = "APT

# Lista de nombres de carpetas que deseas recorrer
folders_to_process = ["APT1-UNICOS", "APT10-UNICOS", "APT19-UNICOS","APT21-UNICOS","APT28-UNICOS","APT29-UNICOS","APT30-UNICOS"]

# Obtener la ruta del directorio actual
current_dir = os.getcwd()

# Crear un conjunto para almacenar los códigos únicos
unique_codes = set()

# Recorrer las carpetas deseadas dentro del directorio actual
for folder_name in folders_to_process:
    folder_path = os.path.join(current_dir, folder_name)

    # Obtener la ruta del archivo dentro de la carpeta
    file_name = os.listdir(folder_path)[0]  # Suponemos que solo hay un archivo en cada carpeta
    file_path = os.path.join(folder_path, file_name)

    # Abrir el archivo
    with open(file_path, "r") as file:
        # Leer todas las líneas del archivo
        lines = file.readlines()

        # Recorrer cada línea y buscar los códigos
        for line in lines:
            codes = line.strip().split()  # Suponemos que los códigos están separados por espacios

            # Agregar los códigos únicos al conjunto
            unique_codes.update(codes)

# Crear el directorio de salida si no existe
output_path = os.path.join(current_dir, output_dir)
os.makedirs(output_path, exist_ok=True)

# Crear un archivo de salida con los códigos únicos
output_file_path = os.path.join(output_path, "unicos.txt")
with open(output_file_path, "w") as output_file:
    output_file.write(",".join(sorted(unique_codes)))
