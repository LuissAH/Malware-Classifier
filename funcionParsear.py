import os
import re

# Definir la ruta del directorio de entrada y el de salida
input_dir = "APT30-RESULTADOS"
output_dir = "APT30-PARSE"

# Definir la expresión regular para buscar lo que está entre corchetes
pattern = r'\[(.*?)\]'

# Recorrer todos los archivos dentro del directorio de entrada
for filename in os.listdir(input_dir):
    input_path = os.path.join(input_dir, filename)
    output_path = os.path.join(output_dir, filename)
    
    # Abrir el archivo de entrada y el de salida
    with open(input_path, "r") as f_input, open(output_path, "w") as f_output:
        # Recorrer todas las líneas del archivo de entrada
        for line in f_input:
            # Si la línea contiene la palabra buscada, buscar lo que está entre corchetes y guardarlo en el archivo de salida
            if "mbc" in line:
                matches = re.findall(pattern, line)
                for match in matches:
                    f_output.write(match + "\n")
